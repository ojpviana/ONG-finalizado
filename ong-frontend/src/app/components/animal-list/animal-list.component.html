<div class="dashboard-container">

  <header class="main-header">
    <div class="logo-area">
      <span class="logo-icon">üíú</span>
      <div>
        <h1>ONG Amigos Peludos</h1>
        <p>Salvando vidas, um pet de cada vez</p>
      </div>
    </div>
    <a class="btn-primary" routerLink="/cadastrar-animal">
      <span>‚ûï</span> Cadastrar Animal
    </a>
  </header>

  <main class="content-area">

    <section class="filters-section">
      <div class="search-bar">
        <span class="search-icon">üîç</span>
        <input
          type="text"
          placeholder="Buscar por nome ou ra√ßa..."
          [(ngModel)]="searchTerm"
          (keyup)="aplicarFiltros()"
        >
      </div>

      <div class="filter-options">
        <span>Filtrar por:</span>
        <button [class.active]="filtroEspecie === 'todos'" (click)="mudarFiltro('todos')">Todos</button>
        <button [class.active]="filtroEspecie === 'cachorro'" (click)="mudarFiltro('cachorro')">Cachorros</button>
        <button [class.active]="filtroEspecie === 'gato'" (click)="mudarFiltro('gato')">Gatos</button>
      </div>
    </section>

    <section class="animals-grid">
      <div class="animal-card" *ngFor="let animal of animaisFiltrados" (click)="abrirModal(animal)">

        <div class="badge-urgent" *ngIf="animal.status === 'URGENTE'">üö® ADO√á√ÉO URGENTE</div>

        <div class="card-image">
          <img [src]="animal.fotoUrl || 'https://placehold.co/400x300?text=Sem+Foto'" [alt]="animal.nome">
          <span class="badge-species">{{ animal.especie }}</span>
        </div>

        <div class="card-content">
          <div class="card-header">
            <h3>{{ animal.nome }}</h3>
            <span class="details">{{ animal.raca }} ‚Ä¢ {{ animal.idade }} anos</span>
          </div>

          <p class="description">
            {{ animal.descricao ? (animal.descricao | slice:0:100) + '...' : 'Sem descri√ß√£o.' }}
          </p>

          <div class="location">
            üìç {{ animal.localizacao || 'Local n√£o informado' }}
          </div>

          <div class="health-badges">
            <span *ngIf="animal.vacinado" class="badge-health vac">üíâ Vacinado</span>
            <span *ngIf="animal.castrado" class="badge-health cas">‚úÇÔ∏è Castrado</span>
          </div>

          <button class="btn-adopt">Ver Detalhes üíú</button>
        </div>
      </div>
    </section>

    <div class="empty-state" *ngIf="animaisFiltrados.length === 0">
      <span class="empty-icon">üòï</span>
      <h3>Nenhum animal encontrado</h3>
      <p>Tente mudar os filtros de busca.</p>
    </div>

  </main>

  <div class="modal-overlay" *ngIf="animalSelecionado" (click)="fecharModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="fecharModal()">‚úñ</button>

      <div class="modal-image-wrapper">
        <img [src]="animalSelecionado?.fotoUrl || 'https://placehold.co/600x400?text=Sem+Foto'" class="modal-img">
      </div>

      <div class="modal-body">
        <div class="modal-header-text">
            <h2>{{ animalSelecionado?.nome }}</h2>
            <p class="subtitle">
                {{ animalSelecionado?.especie }} ‚Ä¢ {{ animalSelecionado?.raca }} ‚Ä¢ {{ animalSelecionado?.idade }} anos
            </p>
        </div>

        <div class="info-block">
          <h4>Sobre</h4>
          <p>{{ animalSelecionado?.descricao || 'Nenhuma descri√ß√£o detalhada informada para este pet.' }}</p>
        </div>

        <div class="info-grid">
          <div>
            <h4>Sa√∫de</h4>
            <ul class="health-list">
              <li [class.check]="animalSelecionado?.vacinado" [class.cross]="!animalSelecionado?.vacinado">
                <i class="bi" [ngClass]="animalSelecionado?.vacinado ? 'bi-check-circle-fill' : 'bi-x-circle-fill'"></i>
                {{ animalSelecionado?.vacinado ? 'Vacinado' : 'N√£o Vacinado' }}
              </li>
              <li [class.check]="animalSelecionado?.castrado" [class.cross]="!animalSelecionado?.castrado">
                <i class="bi" [ngClass]="animalSelecionado?.castrado ? 'bi-check-circle-fill' : 'bi-x-circle-fill'"></i>
                {{ animalSelecionado?.castrado ? 'Castrado' : 'N√£o Castrado' }}
              </li>
            </ul>
          </div>
          <div>
            <h4>Localiza√ß√£o</h4>
            <p class="location-text">
                üìç {{ animalSelecionado?.localizacao || 'Localiza√ß√£o n√£o informada' }}
            </p>
          </div>
        </div>

        <button class="btn-primary full-width">Quero Adotar {{ animalSelecionado?.nome }}!</button>
      </div>
    </div>
  </div>

</div>
